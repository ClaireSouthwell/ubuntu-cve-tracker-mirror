#!/bin/sh
set -e

#
# Usage:
# ./scripts/pkg_status pkgname1 pkgname2 ...
#

if [ "$1" = "-h" ]; then
        echo "./scripts/pkg_status pkgname1 pkgname2 ..."
        exit 0
fi

if [ -z "$1" ]; then
	echo "Need to specific a source package name"
	exit 1
fi

pkgs=""
for p in "$@"; do
	echo "$p" | egrep '^[a-zA-Z0-9]' >/dev/null 2>&1 || continue
	pkgs="[[:space:]]+${p}:|${pkgs}"
done
OUT=$(./scripts/ubuntu-table --supported 2>/dev/null | egrep "(${pkgs}[[:space:]]+dapper)" | sort -k 2)
HEAD=$(echo "$OUT" | grep '^ ')
BODY=$(echo "$OUT" | grep -v '^ ')
if [ -n "$BODY" ]; then
	echo "$HEAD"
	echo "$BODY"
fi
